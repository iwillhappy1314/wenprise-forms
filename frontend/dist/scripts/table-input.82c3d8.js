!function(){"use strict";var e={5311:function(e){e.exports=jQuery}},t={};function n(o){var l=t[o];if(void 0!==l)return l.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}!function(){var e=class{constructor(e,t=!1){this.name=e,this.icons={append:null,removeLast:null,insert:null,remove:null,moveUp:null,moveDown:null},this.isTextBased=t}generateIcon(e,t){throw`*generateIcon* is not overrided for *${this.name}*.`}};var t=class extends e{constructor(e){super("icon-default",!0),Object.assign(this.icons,{append:"＋",removeLast:"－",insert:"↜",remove:"✕",moveUp:"▲",moveDown:"▼"}),e&&Object.assign(this.icons,e)}generateIcon(e,t){let n=document.createTextNode(this.icons[t]||"");return e.appendChild(n),n}};function o(e,...t){t&&t.length&&t.forEach((function(t){if(t){let n=t.split(/\s+/gi);n&&n.length&&n.forEach((function(t){t&&e.classList.add(t)}))}}))}function l(e){return null==e}function s(e){return!isNaN(parseFloat(e))&&isFinite(e)}function r(e){return"[object Object]"===Object.prototype.toString.call(e)}function i(e,t=null,n=null,l=null,s=null){let r=document.createElement(e);return t&&(r.id=t),n&&(r.name=n),l&&o(r,l),s&&(r.type=s),r}var a=class extends e{constructor(e){super("icon-bootstrapicons");let t={baseUrl:"",icons:null};Object.assign(t,e);let n={append:"plus",removeLast:"dash",insert:"arrow-90deg-left",remove:"trash",moveUp:"chevron-up",moveDown:"chevron-down"};t.icons&&Object.assign(n,t.icons),this.icons=n,this.baseUrl=t.baseUrl}generateIcon(e,t){let n=document.createElement("img");return n.src=this.baseUrl+this.icons[t]+".svg",o(n,this.icons[t]),e.appendChild(n),n}};var u=class extends e{constructor(e){super("icon-fontawesome5");let t={icons:null};Object.assign(t,e);let n={append:"fas fa-plus",removeLast:"fas fa-minus",insert:"fas fa-reply",remove:"fas fa-times",moveUp:"fas fa-angle-up",moveDown:"fas fa-angle-down"};t.icons&&Object.assign(n,t.icons),this.icons=n}generateIcon(e,t){let n=document.createElement("i");return o(n,this.icons[t]),e.appendChild(n),n}};var c=class extends e{constructor(e){super("icon-materialdesignicons3");let t={icons:null};Object.assign(t,e);let n={append:"mdi mdi-plus",removeLast:"mdi mdi-minus",insert:"mdi mdi-reply",remove:"mdi mdi-close",moveUp:"mdi mdi-chevron-up",moveDown:"mdi mdi-chevron-down"};t.icons&&Object.assign(n,t.icons),this.icons=n}generateIcon(e,t){let n=document.createElement("span");return o(n,this.icons[t]),e.appendChild(n),n}};var d=class extends e{constructor(e){super("icon-ionicon4");let t={icons:null};Object.assign(t,e);let n={append:"icon ion-md-add",removeLast:"icon ion-md-remove",insert:"icon ion-md-undo",remove:"icon ion-md-close",moveUp:"icon ion-md-arrow-dropup",moveDown:"icon ion-md-arrow-dropdown"};t.icons&&Object.assign(n,t.icons),this.icons=n}generateIcon(e,t){let n=document.createElement("i");return o(n,this.icons[t]),e.appendChild(n),n}};var m=class extends e{constructor(e){super("icon-typicons2");let t={icons:null};Object.assign(t,e);let n={append:"typcn typcn-plus",removeLast:"typcn typcn-minus",insert:"typcn typcn-arrow-back",remove:"typcn typcn-times",moveUp:"typcn typcn-arrow-sorted-up",moveDown:"typcn typcn-arrow-sorted-down"};t.icons&&Object.assign(n,t.icons),this.icons=n}generateIcon(e,t){let n=document.createElement("span");return o(n,this.icons[t]),e.appendChild(n),n}};var p=class extends e{constructor(e){super("icon-openiconic");let t={icons:null};Object.assign(t,e);let n={append:"plus",removeLast:"minus",insert:"share",remove:"x",moveUp:"chevron-top",moveDown:"chevron-bottom"};t.icons&&Object.assign(n,t.icons),this.icons=n}generateIcon(e,t){let n=document.createElement("span");return n.className="oi",n.dataset.glyph=this.icons[t],n.setAttribute("aria-hidden","true"),e.appendChild(n),n}};var h=class{constructor(e,t){this.i18n=e,this.iconFramework=t,this.sectionClasses={table:null,thead:null,theadRow:null,theadCell:null,tbody:null,tbodyRow:null,tbodyCell:null,tfoot:null,tfootRow:null,tfootCell:null,first:null,last:null,control:null,button:null,buttonGroup:null,append:null,removeLast:null,insert:null,remove:null,moveUp:null,moveDown:null,empty:null}}applySectionClasses(e){for(let t in this.sectionClasses)e[t]&&(this.sectionClasses[t]?this.sectionClasses[t]+=" "+e[t]:this.sectionClasses[t]=e[t])}getSectionClasses(e){return this.sectionClasses[e]}createButtonGroup(){return null}generateButton(e,t,n){let l=i("button",n,null,null,"button");return l.title=this.i18n[t],o(l,this.getSectionClasses("button"),this.getSectionClasses(t)),e.appendChild(l),this.iconFramework.generateIcon(l,t),l}generateControl(e,t,n,s){let a=null;if("select"===t.type)if(a=i("select",n,s),Array.isArray(t.ctrlOptions)){if(t.ctrlOptions.length>0)if(r(t.ctrlOptions[0])){let e=null,n=null;for(let o=0;o<t.ctrlOptions.length;o++){l(t.ctrlOptions[o].group)?n=null:e!==t.ctrlOptions[o].group&&(e=t.ctrlOptions[o].group,n=i("optgroup"),n.label=e,a.appendChild(n));let s=i("option");s.value=t.ctrlOptions[o].value,s.innerText=t.ctrlOptions[o].label,l(t.ctrlOptions[o].title)||s.setAttribute("title",t.ctrlOptions[o].title),null===n?s.appendTo(a):s.appendTo(n)}}else for(let e=0;e<t.ctrlOptions.length;e++){let n=t.ctrlOptions[e];a.options[a.options.length]=new Option(n,n)}}else if(r(t.ctrlOptions))for(let e in t.ctrlOptions)a.options[a.options.length]=new Option(t.ctrlOptions[e],e);else if("string"==typeof t.ctrlOptions){let e=t.ctrlOptions.split(";");for(let t=0;t<e.length;t++){let n=e[t].indexOf(":");a.options[a.options.length]=-1===n?new Option(e[t],e[t]):new Option(e[t].substring(n+1,e[t].length),e[t].substring(0,n))}}else"function"==typeof t.ctrlOptions&&t.ctrlOptions(a);else if("checkbox"===t.type)a=i("input",n,s,null,"checkbox"),a.value=1;else if("textarea"===t.type)a=i("textarea",n,s);else if(-1!=t.type.search(/^(color|date|datetime|datetime\-local|email|month|number|range|search|tel|time|url|week)$/)){a=i("input",n,s);try{a.type=t.type}catch(e){}}else a=i("input",n,s),a.type="text";return o(a,this.getSectionClasses("control"),t.ctrlClass),e&&e.appendChild(a),a}};var w=class extends h{constructor(e,t,n){super(t,n),this.name="ui-default"}};var f=class extends h{constructor(e,t,n){super(t,n),this.name="ui-bootstrap4";let o={useButtonGroup:!0,sectionClasses:null,sizing:"normal"};Object.assign(o,e);let l={table:"table",thead:"thead-light",control:"form-control",button:"btn",buttonGroup:"btn-group",append:"btn-outline-secondary",removeLast:"btn-outline-secondary",insert:"btn-outline-secondary",remove:"btn-outline-secondary",moveUp:"btn-outline-secondary",moveDown:"btn-outline-secondary",empty:"text-center"};"small"===o.sizing?(l.table+=" table-sm",l.buttonGroup+=" btn-group-sm",l.control+=" form-control-sm"):"large"===o.sizing&&(l.buttonGroup+=" btn-group-lg",l.control+=" form-control-lg"),o.sectionClasses&&Object.assign(l,o.sectionClasses),this.applySectionClasses(l),this.uiParams=o}createButtonGroup(){if(this.uiParams.useButtonGroup){let e=document.createElement("div");return o(e,this.getSectionClasses("buttonGroup")),e}return super.createButtonGroup()}generateControl(e,t,n,l){let s=null;if("checkbox"===t.type){let r=i("div",null,null,"form-check");e.appendChild(r),s=i("input",n,l,"form-check-input position-static"),s.type="checkbox",s.value=1,o(s,t.ctrlClass),r.appendChild(s)}else"readonly"===t.type?(s=i("input",n,l,null,"text"),o(s,this.getSectionClasses("control"),t.ctrlClass),s.classList.remove("form-control"),s.classList.add("form-control-plaintext"),s.readOnly=!0,e.appendChild(s)):s=super.generateControl(e,t,n,l);return s}};var g=class extends h{constructor(e,t,n){super(t,n),this.name="ui-bootstrap5";let o={useButtonGroup:!0,sectionClasses:null,sizing:"normal"};Object.assign(o,e);let l={table:"table",thead:"table-light",control:"form-control",button:"btn",buttonGroup:"btn-group",append:"btn-outline-secondary",removeLast:"btn-outline-secondary",insert:"btn-outline-secondary",remove:"btn-outline-secondary",moveUp:"btn-outline-secondary",moveDown:"btn-outline-secondary",empty:"text-center"};"small"===o.sizing?(l.table+=" table-sm",l.buttonGroup+=" btn-group-sm",l.control+=" form-control-sm"):"large"===o.sizing&&(l.buttonGroup+=" btn-group-lg",l.control+=" form-control-lg"),o.sectionClasses&&Object.assign(l,o.sectionClasses),this.applySectionClasses(l),this.uiParams=o}createButtonGroup(){if(this.uiParams.useButtonGroup){let e=document.createElement("div");return o(e,this.getSectionClasses("buttonGroup")),e}return super.createButtonGroup()}generateControl(e,t,n,l){let s=null;return"checkbox"===t.type?(s=i("input",n,l,"form-check-input"),s.type="checkbox",s.value=1,o(s,t.ctrlClass),e.appendChild(s)):"readonly"===t.type?(s=i("input",n,l,null,"text"),o(s,this.getSectionClasses("control"),t.ctrlClass),s.classList.remove("form-control"),s.classList.add("form-control-plaintext"),s.readOnly=!0,e.appendChild(s)):s=super.generateControl(e,t,n,l),s}};var C=class extends h{constructor(e,t,n){super(t,n),this.name="ui-bulma";let o={useButtonGroup:!0,sectionClasses:null,sizing:"normal"};Object.assign(o,e);let l={table:"table",control:"input",button:"button",buttonGroup:"field has-addons",append:"is-outlined",removeLast:"is-outlined",insert:"is-outlined",remove:"is-outlined",moveUp:"is-outlined",moveDown:"is-outlined",empty:"has-text-centered"};"small"===o.sizing?(l.table+=" is-narrow",l.control+=" is-small",l.button+=" is-small"):"medium"===o.sizing?(l.control+=" is-medium",l.button+=" is-medium"):"large"===o.sizing&&(l.control+=" is-large",l.button+=" is-large"),o.sectionClasses&&Object.assign(l,o.sectionClasses),this.applySectionClasses(l),this.uiParams=o}generateButton(e,t,n){let l=i("button",n,null,null,"button");l.title=this.i18n[t],o(l,this.getSectionClasses("button"),this.getSectionClasses(t));let s=null;if(this.iconFramework.isTextBased?s=l:(s=document.createElement("span"),s.classList.add("icon"),l.appendChild(s)),this.iconFramework.generateIcon(s,t),this.uiParams.useButtonGroup){let t=document.createElement("p");t.classList.add("control"),t.appendChild(l),e.appendChild(t)}else e.appendChild(l);return l}createButtonGroup(){if(this.uiParams.useButtonGroup){let e=document.createElement("div");return o(e,this.getSectionClasses("buttonGroup")),e}return super.createButtonGroup()}generateControl(e,t,n,l){let s=null;if("select"===t.type){let r=i("div",null,null,"select");"small"===this.uiParams.sizing?r.classList.add("is-small"):"medium"===this.uiParams.sizing?r.classList.add("is-medium"):"large"===this.uiParams.sizing&&r.classList.add("is-large"),e.appendChild(r),s=super.generateControl(null,t,n,l),o(s,t.ctrlClass),r.appendChild(s)}else if("checkbox"===t.type){let r=i("label",null,null,"checkbox");e.appendChild(r),s=i("input",n,l,null,"checkbox"),s.value=1,o(s,t.ctrlClass),r.appendChild(s)}else"readonly"===t.type?(s=i("input",n,l,null,"text"),o(s,this.getSectionClasses("control"),t.ctrlClass),s.classList.add("is-static"),s.readOnly=!0,e.appendChild(s)):s=super.generateControl(e,t,n,l);return s}};var b=class extends h{constructor(e,t,n){super(t,n),this.name="ui-foundation6";let o={useButtonGroup:!0,sectionClasses:null};Object.assign(o,e);let l={button:"button",buttonGroup:"button-group"};o.sectionClasses&&Object.assign(l,o.sectionClasses),this.applySectionClasses(l),this.uiParams=o}createButtonGroup(){if(this.uiParams.useButtonGroup){let e=document.createElement("div");return o(e,this.getSectionClasses("buttonGroup")),e}return super.createButtonGroup()}};var y=class{constructor(e){const n=this;Object.assign(n,{uniqueIndex:0,rowOrder:[],isDataLoaded:!1,visibleCount:0,finalColSpan:0,hideLastColumn:!1,settings:null,tbWhole:null,tbBody:null,iconFramework:null,uiFramework:null});const s=Object.assign({},e);n.settings=s,console.debug("ag:Options initialized");let r=null;if(r="string"==typeof s.element?document.getElementById(s.element):s.element,!r||!r.tagName||"TABLE"!==r.tagName)throw"*element* is not defined or is not a table DOM element.";if(n.tbWhole=r,r.innerHTML="",console.debug("ag:Checked element"),"bootstrapicons"===s.iconFramework)n.iconFramework=new a(s.iconParams);else if("fontawesome5"===s.iconFramework)n.iconFramework=new u(s.iconParams);else if("ionicon4"===s.iconFramework)n.iconFramework=new d(s.iconParams);else if("materialdesignicons3"===s.iconFramework)n.iconFramework=new c(s.iconParams);else if("openiconic"===s.iconFramework)n.iconFramework=new p(s.iconParams);else if("typicons2"===s.iconFramework)n.iconFramework=new m(s.iconParams);else{if(s.iconFramework&&"default"!==s.iconFramework)throw`Unknown Icon framework *${s.iconFramework}*.`;n.iconFramework=new t(s.iconParams)}if(console.debug("ag:Checked icon framework"),"bootstrap4"===s.uiFramework)n.uiFramework=new f(s.uiParams,s.i18n,n.iconFramework);else if("bootstrap5"===s.uiFramework)n.uiFramework=new g(s.uiParams,s.i18n,n.iconFramework);else if("bulma"===s.uiFramework)n.uiFramework=new C(s.uiParams,s.i18n,n.iconFramework);else if("foundation6"===s.uiFramework)n.uiFramework=new b(s.uiParams,s.i18n,n.iconFramework);else{if(s.uiFramework&&"default"!==s.uiFramework)throw`Unknown UI framework *${s.uiFramework}*.`;n.uiFramework=new w(s.uiParams,s.i18n,n.iconFramework)}console.debug("ag:Checked ui framework"),l(s.idPrefix)&&(r.id?s.idPrefix=r.id:s.idPrefix="ag"+(new Date).getTime(),console.debug(`*idPrefix* = ${s.idPrefix}`)),s.sectionClasses&&n.uiFramework.applySectionClasses(s.sectionClasses),o(r,n.uiFramework.getSectionClasses("table"));const h=n.createElement("thead");r.appendChild(h);let y,v=n.createElement("tr","theadRow");h.appendChild(v);let x=0;s.hideRowNumColumn||(y=n.createElement("th","theadCell"),v.appendChild(y),x++);let R=0;for(let e=0;e<s.columns.length;e++)if("hidden"!==s.columns[e].type){if(0===R){if(y=n.createElement("th","theadCell"),v.appendChild(y),o(y,s.columns[e].displayClass),!l(s.columns[e].displayCss))for(let t in s.columns[e].displayCss)y.style[t]=s.columns[e].displayCss[t];s.columns[e].headerSpan>1&&(y.setAttribute("colSpan",s.columns[e].headerSpan),R=s.columns[e].headerSpan-1),"function"==typeof s.columns[e].display?s.columns[e].display(y):s.columns[e].display&&(y.innerText=s.columns[e].display)}else R--;x++}y=n.createElement("th","theadCell"),s.hideButtons.insert&&s.hideButtons.remove&&s.hideButtons.moveUp&&s.hideButtons.moveDown?(n.hideLastColumn=!0,y.style.display="none"):x++,!n.hideLastColumn&&s.rowButtonsInFront?s.hideRowNumColumn?v.insertBefore(y,v.firstChild):v.insertBefore(y,v.childNodes[1]):v.appendChild(y),n.finalColSpan=x;const O=n.createElement("tbody");r.appendChild(O),n.tbBody=O;const k=n.createElement("tfoot");r.appendChild(k),v=n.createElement("tr","tfootRow"),k.appendChild(v),y=n.createElement("td","tfootCell"),y.colSpan=n.finalColSpan,v.appendChild(y);const B=s.idPrefix+"_rowOrder",E=i("input",B,B,null,"hidden");if(y.appendChild(E),s.hideButtons.append&&s.hideButtons.removeLast)v.style.display="none";else{let e=n.uiFramework.createButtonGroup();if(e?y.appendChild(e):e=y,!s.hideButtons.append){n.uiFramework.generateButton(e,"append").addEventListener("click",(function(e){n.insertRow(1)}))}if(!s.hideButtons.removeLast){n.uiFramework.generateButton(e,"removeLast").addEventListener("click",(function(e){n.removeRow()}))}}this.showEmptyMessage(),n.settings=s,console.debug("ag:Initialized")}createElement(e,t,n){return i(e,n,null,this.uiFramework.getSectionClasses(t||e))}loadData(e,t=!1){if(!Array.isArray(e)||!e.length)throw"*records* should be in array format!";const n=this,o=n.settings;n.tbBody.innerHTML="",n.rowOrder.length=0,n.uniqueIndex=0;const l=n.insertRow(e.length);for(let t=0;t<l.addedRows.length;t++){for(let l=0;l<o.columns.length;l++)n.setCtrlValue(l,n.rowOrder[t],e[t][o.columns[l].name]);"function"==typeof o.rowDataLoaded&&o.rowDataLoaded(n.tbWhole,e[t],t,n.rowOrder[t])}n.isDataLoaded=!0,t&&(n.settings.initData=null),"function"==typeof o.dataLoaded&&o.dataLoaded(n.tbWhole,e)}insertRow(e,t,n){const r=this,a=r.settings,u=r.uiFramework,c=r.tbBody;let d,m,p=[],h=null,w=!1,f=e,g=!1;if(Array.isArray(e)&&(f=e.length,g=!0),s(n)){for(let e=0;e<r.rowOrder.length;e++)if(r.rowOrder[e]===n){t=e,0!==e&&(h=e-1);break}}else s(t)?t>=r.rowOrder.length?t=null:h=t-1:0!==r.rowOrder.length&&(t=null,h=r.rowOrder.length-1);0===r.rowOrder.length&&(c.innerHTML="");for(let n=0;n<f;n++){if(0<a.maxRowsAllowed&&r.rowOrder.length>=a.maxRowsAllowed){w=!0;break}let h=++r.uniqueIndex,f=[];if(d=r.createElement("tr","tbodyRow",a.idPrefix+"_$row_"+h),d.dataset.uniqueIndex=h,s(t)){let e=t+n;r.rowOrder.splice(e,0,h),c.insertBefore(d,c.childNodes[e])}else r.rowOrder.push(h),c.appendChild(d);p.push(h),a.hideRowNumColumn||(m=r.createElement("td","tbodyCell",a.idPrefix+"_$rowNum_"+h),m.innerText=""+r.rowOrder.length,o(m,u.getSectionClasses("first")),d.appendChild(m));for(let t=0;t<a.columns.length;t++){if("hidden"===a.columns[t].type){f.push(t);continue}if(m=r.createElement("td","tbodyCell"),d.appendChild(m),o(m,a.columns[t].cellClass),!l(a.columns[t].cellCss))for(let e in a.columns[t].cellCss)m.style[e]=a.columns[t].cellCss[e];let s,i=a.idPrefix+"_"+a.columns[t].name+"_"+h;s="function"==typeof a.nameFormatter?a.nameFormatter(a.idPrefix,a.columns[t].name,h):i;let u=null;const c="custom"===a.columns[t].type;if(c)"function"==typeof a.columns[t].customBuilder&&(u=a.columns[t].customBuilder(m,a.idPrefix,a.columns[t].name,h));else{if(u=r.uiFramework.generateControl(m,a.columns[t],i,s),!l(a.columns[t].ctrlAttr))for(let e in a.columns[t].ctrlAttr)u.setAttribute(e,a.columns[t].ctrlAttr[e]);if(!l(a.columns[t].ctrlCss))for(let e in a.columns[t].ctrlCss)u.style[e]=a.columns[t].ctrlCss[e];if(a.columns[t].events){u.dataset.columnName=a.columns[t].name,u.dataset.uniqueIndex=h;for(let e in a.columns[t].events){let n=a.columns[t].events[e];u.addEventListener(e,(function(e){e.columnName=e.currentTarget.dataset.columnName,e.uniqueIndex=parseInt(e.currentTarget.dataset.uniqueIndex),n(e)}))}}}g?r.setCtrlValue(t,h,e[n][a.columns[t].name]):l(a.columns[t].value)||r.setCtrlValue(t,h,a.columns[t].value),c||"function"!=typeof a.columns[t].ctrlAdded||a.columns[t].ctrlAdded(u,m,h)}if(m=r.createElement("td","tbodyCell",a.idPrefix+"_$rowButton_"+h),r.hideLastColumn||!a.rowButtonsInFront?d.appendChild(m):a.hideRowNumColumn?d.insertBefore(m,d.firstChild):d.insertBefore(m,d.childNodes[1]),f.forEach((function(t){const o=a.columns[t].name;let s,u=a.idPrefix+"_"+o+"_"+h;s="function"==typeof a.nameFormatter?a.nameFormatter(a.idPrefix,o,h):u,m.appendChild(i("input",u,s,null,"hidden")),g?r.setCtrlValue(t,h,e[n][o]):l(a.columns[t].value)||r.setCtrlValue(t,h,a.columns[t].value)})),r.hideLastColumn)m.style.display="none";else if(a.columns.length>r.visibleCount){o(m,u.getSectionClasses("last"));let e=u.createButtonGroup();e?m.appendChild(e):e=m,["insert","remove","moveUp","moveDown"].forEach((function(t){if(!a.hideButtons[t]){const n=a.idPrefix+"_$"+t+"_"+h,o=u.generateButton(e,t,n);o.dataset.uniqueIndex=h,o.addEventListener("click",(function(e){const n=parseInt(e.currentTarget.dataset.uniqueIndex);r.rowButtonActions(t,n)}))}}))}}return r.saveSetting(),a.hideRowNumColumn||l(t)||r.sortSequence(t),s(t)?"function"==typeof a.afterRowInserted&&a.afterRowInserted(r.tbWhole,h,p):"function"==typeof a.afterRowAppended&&a.afterRowAppended(r.tbWhole,h,p),w&&"function"==typeof a.maxNumRowsReached&&a.maxNumRowsReached(r.tbWhole),{addedRows:p,parentIndex:h,rowIndex:t}}removeRow(e,t,n){const o=this;let l=o.settings,r=o.tbBody;if(s(t))for(let n=0;n<o.rowOrder.length;n++)if(o.rowOrder[n]===t){e=n;break}s(e)?(n||"function"!=typeof l.beforeRowRemove||l.beforeRowRemove(o.tbWhole,e))&&(o.rowOrder.splice(e,1),r.removeChild(r.childNodes[e]),o.saveSetting(),l.hideRowNumColumn||o.sortSequence(e),"function"==typeof l.afterRowRemoved&&l.afterRowRemoved(o.tbWhole,e)):(n||"function"!=typeof l.beforeRowRemove||l.beforeRowRemove(o.tbWhole,o.rowOrder.length-1))&&(t=o.rowOrder.pop(),r.removeChild(r.lastChild),o.saveSetting(),"function"==typeof l.afterRowRemoved&&l.afterRowRemoved(o.tbWhole,null)),0===o.rowOrder.length&&o.showEmptyMessage()}moveUpRow(e,t){const n=this;let o=n.settings,r=n.tbBody,i=null;if(s(e)&&e>0&&e<n.rowOrder.length?(i=e,t=n.rowOrder[e]):s(t)&&(i=n.findRowIndex(t)),!l(i)&&i>0){let e=n.rowOrder[i-1],l=document.getElementById(o.idPrefix+"_$row_"+t),s=document.getElementById(o.idPrefix+"_$row_"+e);if(r.removeChild(l),r.insertBefore(l,s),n.rowOrder[i]=e,n.rowOrder[i-1]=t,!o.hideRowNumColumn){let n=document.getElementById(o.idPrefix+"_$rowNum_"+t),l=document.getElementById(o.idPrefix+"_$rowNum_"+e),s=l.innerHTML;l.innerHTML=n.innerHTML,n.innerHTML=s}n.saveSetting(),document.getElementById(o.idPrefix+"_$moveUp_"+t).blur(),document.getElementById(o.idPrefix+"_$moveUp_"+e).focus(),"function"==typeof o.afterRowSwapped&&o.afterRowSwapped(n.tbWhole,i,i-1)}}moveDownRow(e,t){const n=this;let o=n.settings,r=n.tbBody,i=null;if(s(e)&&e>=0&&e<n.rowOrder.length-1?(i=e,t=n.rowOrder[e]):s(t)&&(i=n.findRowIndex(t)),!l(i)&&i!==n.rowOrder.length-1){let e=n.rowOrder[i+1],l=document.getElementById(o.idPrefix+"_$row_"+t),s=document.getElementById(o.idPrefix+"_$row_"+e);if(r.removeChild(s),r.insertBefore(s,l),n.rowOrder[i]=e,n.rowOrder[i+1]=t,!o.hideRowNumColumn){let n=document.getElementById(o.idPrefix+"_$rowNum_"+t),l=document.getElementById(o.idPrefix+"_$rowNum_"+e),s=l.innerHTML;l.innerHTML=n.innerHTML,n.innerHTML=s}n.saveSetting(),document.getElementById(o.idPrefix+"_$moveDown_"+t).blur(),document.getElementById(o.idPrefix+"_$moveDown_"+e).focus(),"function"==typeof o.afterRowSwapped&&o.afterRowSwapped(n.tbWhole,i,i+1)}}setCtrlValue(e,t,n){const o=this;let r=o.settings,i=r.columns[e].type,a=r.columns[e].name;if("custom"===i)"function"==typeof r.columns[e].customSetter&&r.columns[e].customSetter(r.idPrefix,a,t,n);else{let e=o.getCellCtrl(r.idPrefix,a,t);"checkbox"===i?"boolean"==typeof n?e.checked=n:s(n)?e.checked=0!==n:e.checked=!l(n):e.value=l(n)?"":n}}getCellCtrl(e,t,n){return document.getElementById(e+"_"+t+"_"+n)}getCtrlValue(e,t){const n=this,o=n.settings,l=o.columns[e];if("custom"===l.type){if("function"==typeof l.customGetter)return l.customGetter(o.idPrefix,l.name,t);throw`*customGetter* of column *${l.name}* is not defined.`}{let e=n.getCellCtrl(o.idPrefix,l.name,t);return null===e?null:"checkbox"===l.type?e.checked?1:0:e.value}}getRowValue(e,t){const n=this;let o={},s=l(t)?"":"_"+t;return n.settings.columns.forEach((function(t,l){let r=t.name+s;o[r]=n.getCtrlValue(l,e)})),o}getColumnIndex(e){const t=this.settings.columns;for(let n=0;n<t.length;n++)if(t[n].name===e)return n;return null}isRowEmpty(e){const t=this,n=t.settings.columns;for(let o=0;o<n.length;o++){const s=n[o].emptyCriteria;let r=t.getCtrlValue(o,e);if("function"==typeof s){if(!s(r))return!1}else{let i=null;if(l(s)){const l=n[o].type;if("checkbox"===l)i=0;else if("select"===l){const l=t.getCellCtrl(t.settings.idPrefix,n[o].name,e).options;i=l.length>0?l[0].value:""}else i=""}else i=s;if(r!==i)return!1}}return!0}findRowIndex(e){for(let t=0;t<this.rowOrder.length;t++)if(this.rowOrder[t]===e)return t;return null}saveSetting(){document.getElementById(this.settings.idPrefix+"_rowOrder").value=this.rowOrder.join()}showEmptyMessage(){const e=this;e.tbBody.innerHTML="";const t=e.createElement("tr","tbodyRow");e.tbBody.appendChild(t);const n=e.createElement("td","tbodyCell");n.setAttribute("colspan",e.finalColSpan),o(n,e.uiFramework.getSectionClasses("empty")),n.innerText=e.settings.i18n.rowEmpty,t.appendChild(n)}sortSequence(e){const t=this;for(let n=e||0;n<t.rowOrder.length;n++)document.getElementById(t.settings.idPrefix+"_$rowNum_"+t.rowOrder[n]).innerText=""+(n+1)}rowButtonActions(e,t){const n=this;"insert"===e?n.insertRow(1,null,t):"remove"===e?n.removeRow(null,t):"moveUp"===e?n.moveUpRow(null,t):"moveDown"===e&&n.moveDownRow(null,t)}};const v=new WeakMap,x={element:null,uiFramework:null,uiParams:null,iconFramework:null,iconParams:null,initRows:3,idPrefix:null,initData:null,columns:[],i18n:null,hideButtons:null,hideRowNumColumn:!1,rowButtonsInFront:!1,rowCountName:"_RowCount",sectionClasses:null,maxRowsAllowed:0},R={nameFormatter:null,dataLoaded:null,rowDataLoaded:null,afterRowAppended:null,afterRowInserted:null,afterRowSwapped:null,beforeRowRemove:null,afterRowRemoved:null,maxNumRowsReached:null},O={type:"text",name:null,value:null,display:null,displayCss:null,displayClass:null,displayTooltip:null,headerSpan:1,cellCss:null,cellClass:null,ctrlAttr:null,ctrlProp:null,ctrlCss:null,ctrlClass:null,ctrlOptions:null,invisible:!1,emptyCriteria:null,customBuilder:null,customGetter:null,customSetter:null,events:null,ctrlAdded:null};var k=class{constructor(e){let t=Object.assign({},x,R,e),n={append:"Append Row",removeLast:"Remove Last Row",insert:"Insert Row Above",remove:"Remove Current Row",moveUp:"Move Up",moveDown:"Move Down",rowEmpty:"This Grid Is Empty"};t.i18n&&Object.assign(n,t.i18n),t.i18n=n;let o={append:!1,removeLast:!1,insert:!1,remove:!1,moveUp:!1,moveDown:!1};t.hideButtons&&Object.assign(o,t.hideButtons),t.hideButtons=o;for(let e=0;e<t.columns.length;e++){let n=Object.assign({},O,t.columns[e]);t.columns[e]=n}const l=new y(t);v.set(this,l),Array.isArray(t.initData)?l.loadData(t.initData,!0):t.initRows>0&&l.insertRow(t.initRows)}appendRow(e){return v.get(this).insertRow(e||1).addedRows}insertRow(e,t){return v.get(this).insertRow(e,t).addedRows}removeRow(e){v.get(this).removeRow(e)}moveUpRow(e){v.get(this).moveUpRow(e)}moveDownRow(e){v.get(this).moveDownRow(e)}load(e){v.get(this).loadData(e)}getAllValue(e){let t=v.get(this),n=e?{}:[];return t.rowOrder.forEach((function(o,l){e?Object.assign(n,t.getRowValue(o,l)):n.push(t.getRowValue(o))})),e&&(n[t.settings.rowCountName]=t.rowOrder.length),n}getUniqueIndex(e){const t=v.get(this).rowOrder;return e>=0&&e<t.length?t[e]:null}getRowIndex(e){const t=v.get(this).rowOrder;for(let n=0;n<t.length;n++)if(t[n]===e)return n;return null}getRowCount(){return v.get(this).rowOrder.length}getRowOrder(){return v.get(this).rowOrder.slice()}getRowValue(e){let t=this.getUniqueIndex(e);return null!==t?v.get(this).getRowValue(t):null}getCtrlValue(e,t){const n=v.get(this).getColumnIndex(e),o=this.getUniqueIndex(t);return null!==n&&null!==o?v.get(this).getCtrlValue(n,o):null}setCtrlValue(e,t,n){const o=v.get(this).getColumnIndex(e),l=this.getUniqueIndex(t);if(null!==o&&null!==l)return v.get(this).setCtrlValue(o,l,n)}getColumns(){return v.get(this).settings.columns.slice()}getCellCtrl(e,t){const n=this.getUniqueIndex(t);return this.getCellCtrlByUniqueIndex(e,n)}getCellCtrlByUniqueIndex(e,t){const n=v.get(this);return null!==n.getColumnIndex(e)&&s(t)?n.getCellCtrl(n.settings.idPrefix,e,t):null}isRowEmpty(e){const t=this.getUniqueIndex(e);return null===t||v.get(this).isRowEmpty(t)}removeEmptyRows(){const e=v.get(this),t=this.getRowOrder();for(let n=0;n<t.length;n++)e.isRowEmpty(t[n])&&e.removeRow(null,t[n],!0)}},B=n(5311);B.each(B(".rs-table-input"),(function(e,t){new k(B(t).data("settings"))}))}()}();