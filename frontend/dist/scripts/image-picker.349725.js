(()=>{var t={1652:function(t,e,i){var s=i(5311);(function(){var t,e,i,l,r=function(t,e){return function(){return t.apply(e,arguments)}},n=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};s.fn.extend({imagepicker:function(e){return null==e&&(e={}),this.each((function(){var i;if((i=s(this)).data("picker")&&i.data("picker").destroy(),i.data("picker",new t(this,l(e))),null!=e.initialized)return e.initialized.call(i.data("picker"))}))}}),l=function(t){var e;return e={hide_select:!0,show_label:!1,initialized:void 0,changed:void 0,clicked:void 0,selected:void 0,limit:void 0,limit_reached:void 0},s.extend(e,t)},i=function(t,e){var i,s,l,r;if(!t||!e||t.length!==e.length)return!1;for(t=t.slice(0),e=e.slice(0),t.sort(),e.sort(),i=s=0,l=t.length;s<l;i=++s)if(r=t[i],e[i]!==r)return!1;return!0},t=function(){function t(t,e){this.opts=null!=e?e:{},this.sync_picker_with_select=r(this.sync_picker_with_select,this),this.select=s(t),this.multiple="multiple"===this.select.attr("multiple"),null!=this.select.data("limit")&&(this.opts.limit=parseInt(this.select.data("limit"))),this.build_and_append_picker()}return t.prototype.destroy=function(){var t,e,i;for(t=0,e=(i=this.picker_options).length;t<e;t++)i[t].destroy();return this.picker.remove(),this.select.off("change",this.sync_picker_with_select),this.select.removeData("picker"),this.select.show()},t.prototype.build_and_append_picker=function(){return this.opts.hide_select&&this.select.hide(),this.select.on("change",this.sync_picker_with_select),null!=this.picker&&this.picker.remove(),this.create_picker(),this.select.after(this.picker),this.sync_picker_with_select()},t.prototype.sync_picker_with_select=function(){var t,e,i,s,l;for(l=[],t=0,e=(s=this.picker_options).length;t<e;t++)(i=s[t]).is_selected()?l.push(i.mark_as_selected()):l.push(i.unmark_as_selected());return l},t.prototype.create_picker=function(){return this.picker=s("<ul class='rs-thumbnails'></ul>"),this.picker_options=[],this.recursively_parse_option_groups(this.select,this.picker),this.picker},t.prototype.recursively_parse_option_groups=function(t,i){var l,r,n,c,o,a,h,p,u,d;for(r=0,c=(p=t.children("optgroup")).length;r<c;r++)h=p[r],h=s(h),(l=s("<ul></ul>")).append(s("<li class='group_title'>"+h.attr("label")+"</li>")),i.append(s("<li class='group'>").append(l)),this.recursively_parse_option_groups(h,l);for(u=function(){var i,s,l,r;for(r=[],i=0,s=(l=t.children("option")).length;i<s;i++)a=l[i],r.push(new e(a,this,this.opts));return r}.call(this),d=[],n=0,o=u.length;n<o;n++)a=u[n],this.picker_options.push(a),a.has_image()&&d.push(i.append(a.node));return d},t.prototype.has_implicit_blanks=function(){var t;return function(){var e,i,s,l;for(l=[],e=0,i=(s=this.picker_options).length;e<i;e++)(t=s[e]).is_blank()&&!t.has_image()&&l.push(t);return l}.call(this).length>0},t.prototype.selected_values=function(){return this.multiple?this.select.val()||[]:[this.select.val()]},t.prototype.toggle=function(t,e){var l,r,c;if(r=this.selected_values(),c=t.value().toString(),this.multiple?n.call(this.selected_values(),c)>=0?((l=this.selected_values()).splice(s.inArray(c,r),1),this.select.val([]),this.select.val(l)):null!=this.opts.limit&&this.selected_values().length>=this.opts.limit?null!=this.opts.limit_reached&&this.opts.limit_reached.call(this.select):this.select.val(this.selected_values().concat(c)):this.has_implicit_blanks()&&t.is_selected()?this.select.val(""):this.select.val(c),!i(r,this.selected_values())&&(this.select.change(),null!=this.opts.changed))return this.opts.changed.call(this.select,r,this.selected_values(),e)},t}(),e=function(){function t(t,e,i){this.picker=e,this.opts=null!=i?i:{},this.clicked=r(this.clicked,this),this.option=s(t),this.create_node()}return t.prototype.destroy=function(){return this.node.find(".rs-thumbnail__img").off("click",this.clicked)},t.prototype.has_image=function(){return!0},t.prototype.is_blank=function(){return!(null!=this.value()&&""!==this.value())},t.prototype.is_selected=function(){var t;return t=this.picker.select.val(),this.picker.multiple?s.inArray(this.value(),t)>=0:this.value()===t},t.prototype.mark_as_selected=function(){return this.node.find(".rs-thumbnail__img").addClass("rs-selected")},t.prototype.unmark_as_selected=function(){return this.node.find(".rs-thumbnail__img").removeClass("rs-selected")},t.prototype.value=function(){return this.option.val()},t.prototype.label=function(){return this.option.data("img-label")?this.option.data("img-label"):this.option.val()},t.prototype.clicked=function(t){if(this.picker.toggle(this,t),null!=this.opts.clicked&&this.opts.clicked.call(this.picker.select,this,t),null!=this.opts.selected&&this.is_selected())return this.opts.selected.call(this.picker.select,this,t)},t.prototype.create_node=function(){var t,e,i,l;return this.node=s("<li/>"),(t=s("<img class='image_picker_image'/>")).attr("src",this.option.html()),l=s("<div class='rs-thumbnail__img'>"),(i=this.option.data("img-class"))&&(this.node.addClass(i),t.addClass(i),l.addClass(i)),(e=this.option.data("img-alt"))&&t.attr("alt",e),l.on("click",this.clicked),l.append(t),this.opts.show_label&&l.append(s("<p/>").addClass("rs-thumbnail__label").html(this.label())),this.node.append(l),this.node},t}()}).call(this)},5311:t=>{"use strict";t.exports=jQuery}},e={};function i(s){var l=e[s];if(void 0!==l)return l.exports;var r=e[s]={exports:{}};return t[s].call(r.exports,r,r.exports,i),r.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";i(1652);var t=i(5311);t.each(t(".rs-form--image-picker select"),(function(e,i){t(i).imagepicker(t(i).data("settings"))}))})()})();