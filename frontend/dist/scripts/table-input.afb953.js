(()=>{"use strict";var e={5311:e=>{e.exports=jQuery}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var l=t[o]={exports:{}};return e[o](l,l.exports,n),l.exports}(()=>{const e=class{constructor(e,t=!1){this.name=e,this.icons={append:null,removeLast:null,insert:null,remove:null,moveUp:null,moveDown:null},this.isTextBased=t}generateIcon(e,t){throw`*generateIcon* is not overrided for *${this.name}*.`}};const t=class extends e{constructor(e){super("icon-default",!0),Object.assign(this.icons,{append:"＋",removeLast:"－",insert:"↜",remove:"✕",moveUp:"▲",moveDown:"▼"}),e&&Object.assign(this.icons,e)}generateIcon(e,t){let n=document.createTextNode(this.icons[t]||"");return e.appendChild(n),n}};function o(e,...t){t&&t.length&&t.forEach((function(t){if(t){let n=t.split(/\s+/gi);n&&n.length&&n.forEach((function(t){t&&e.classList.add(t)}))}}))}function s(e){return null==e}function l(e){return!isNaN(parseFloat(e))&&isFinite(e)}function r(e){return"[object Object]"===Object.prototype.toString.call(e)}function i(e,t=null,n=null,s=null,l=null){let r=document.createElement(e);return t&&(r.id=t),n&&(r.name=n),s&&o(r,s),l&&(r.type=l),r}const a=class extends e{constructor(e){super("icon-bootstrapicons");let t={baseUrl:"",icons:null};Object.assign(t,e);let n={append:"plus",removeLast:"dash",insert:"arrow-90deg-left",remove:"trash",moveUp:"chevron-up",moveDown:"chevron-down"};t.icons&&Object.assign(n,t.icons),this.icons=n,this.baseUrl=t.baseUrl}generateIcon(e,t){let n=document.createElement("img");return n.src=this.baseUrl+this.icons[t]+".svg",o(n,this.icons[t]),e.appendChild(n),n}};const u=class extends e{constructor(e){super("icon-fontawesome6");let t={icons:null};Object.assign(t,e);let n={append:"fa-solid fa-plus",removeLast:"fa-solid fa-minus",insert:"fa-solid fa-reply",remove:"fa-solid fa-times",moveUp:"fa-solid fa-angle-up",moveDown:"fa-solid fa-angle-down"};t.icons&&Object.assign(n,t.icons),this.icons=n}generateIcon(e,t){let n=document.createElement("i");return o(n,this.icons[t]),e.appendChild(n),n}};const c=class extends e{constructor(e){super("icon-fontawesome5");let t={icons:null};Object.assign(t,e);let n={append:"fas fa-plus",removeLast:"fas fa-minus",insert:"fas fa-reply",remove:"fas fa-times",moveUp:"fas fa-angle-up",moveDown:"fas fa-angle-down"};t.icons&&Object.assign(n,t.icons),this.icons=n}generateIcon(e,t){let n=document.createElement("i");return o(n,this.icons[t]),e.appendChild(n),n}};const d=class extends e{constructor(e){super("icon-materialdesignicons3");let t={icons:null};Object.assign(t,e);let n={append:"mdi mdi-plus",removeLast:"mdi mdi-minus",insert:"mdi mdi-reply",remove:"mdi mdi-close",moveUp:"mdi mdi-chevron-up",moveDown:"mdi mdi-chevron-down"};t.icons&&Object.assign(n,t.icons),this.icons=n}generateIcon(e,t){let n=document.createElement("span");return o(n,this.icons[t]),e.appendChild(n),n}};const m=class extends e{constructor(e){super("icon-ionicon4");let t={icons:null};Object.assign(t,e);let n={append:"icon ion-md-add",removeLast:"icon ion-md-remove",insert:"icon ion-md-undo",remove:"icon ion-md-close",moveUp:"icon ion-md-arrow-dropup",moveDown:"icon ion-md-arrow-dropdown"};t.icons&&Object.assign(n,t.icons),this.icons=n}generateIcon(e,t){let n=document.createElement("i");return o(n,this.icons[t]),e.appendChild(n),n}};const p=class extends e{constructor(e){super("icon-typicons2");let t={icons:null};Object.assign(t,e);let n={append:"typcn typcn-plus",removeLast:"typcn typcn-minus",insert:"typcn typcn-arrow-back",remove:"typcn typcn-times",moveUp:"typcn typcn-arrow-sorted-up",moveDown:"typcn typcn-arrow-sorted-down"};t.icons&&Object.assign(n,t.icons),this.icons=n}generateIcon(e,t){let n=document.createElement("span");return o(n,this.icons[t]),e.appendChild(n),n}};const h=class extends e{constructor(e){super("icon-openiconic");let t={icons:null};Object.assign(t,e);let n={append:"plus",removeLast:"minus",insert:"share",remove:"x",moveUp:"chevron-top",moveDown:"chevron-bottom"};t.icons&&Object.assign(n,t.icons),this.icons=n}generateIcon(e,t){let n=document.createElement("span");return n.className="oi",n.dataset.glyph=this.icons[t],n.setAttribute("aria-hidden","true"),e.appendChild(n),n}};const f=class{constructor(e,t){this.i18n=e,this.iconFramework=t,this.sectionClasses={table:null,thead:null,theadRow:null,theadCell:null,tbody:null,tbodyRow:null,tbodyCell:null,tfoot:null,tfootRow:null,tfootCell:null,first:null,last:null,control:null,button:null,buttonGroup:null,append:null,removeLast:null,insert:null,remove:null,moveUp:null,moveDown:null,empty:null}}applySectionClasses(e){for(let t in this.sectionClasses)e[t]&&(this.sectionClasses[t]?this.sectionClasses[t]+=" "+e[t]:this.sectionClasses[t]=e[t])}getSectionClasses(e){return this.sectionClasses[e]}createButtonGroup(){return null}generateButton(e,t,n){let s=i("button",n,null,null,"button");return s.title=this.i18n[t],o(s,this.getSectionClasses("button"),this.getSectionClasses(t)),e.appendChild(s),this.iconFramework.generateIcon(s,t),s}generateControl(e,t,n,l){let a=null;if("select"===t.type)if(a=i("select",n,l),Array.isArray(t.ctrlOptions)){if(t.ctrlOptions.length>0)if(r(t.ctrlOptions[0])){let e=null,n=null;for(let o=0;o<t.ctrlOptions.length;o++){s(t.ctrlOptions[o].group)?n=null:e!==t.ctrlOptions[o].group&&(e=t.ctrlOptions[o].group,n=i("optgroup"),n.label=e,a.appendChild(n));let l=i("option");l.value=t.ctrlOptions[o].value,l.innerText=t.ctrlOptions[o].label,s(t.ctrlOptions[o].title)||l.setAttribute("title",t.ctrlOptions[o].title),null===n?l.appendTo(a):l.appendTo(n)}}else for(let e=0;e<t.ctrlOptions.length;e++){let n=t.ctrlOptions[e];a.options[a.options.length]=new Option(n,n)}}else if(r(t.ctrlOptions))for(let e in t.ctrlOptions)a.options[a.options.length]=new Option(t.ctrlOptions[e],e);else if("string"==typeof t.ctrlOptions){let e=t.ctrlOptions.split(";");for(let t=0;t<e.length;t++){let n=e[t].indexOf(":");a.options[a.options.length]=-1===n?new Option(e[t],e[t]):new Option(e[t].substring(n+1,e[t].length),e[t].substring(0,n))}}else"function"==typeof t.ctrlOptions&&t.ctrlOptions(a);else if("checkbox"===t.type)a=i("input",n,l,null,"checkbox"),a.value=1;else if("textarea"===t.type)a=i("textarea",n,l);else if(-1!=t.type.search(/^(color|date|datetime|datetime\-local|email|month|number|range|search|tel|time|url|week)$/)){a=i("input",n,l);try{a.type=t.type}catch(e){}}else a=i("input",n,l),a.type="text";return o(a,this.getSectionClasses("control"),t.ctrlClass),e&&e.appendChild(a),a}};const w=class extends f{constructor(e,t,n){super(t,n),this.name="ui-default"}};const g=class extends f{constructor(e,t,n){super(t,n),this.name="ui-bootstrap4";let o={useButtonGroup:!0,sectionClasses:null,sizing:"normal"};Object.assign(o,e);let s={table:"table",thead:"thead-light",control:"form-control",button:"btn",buttonGroup:"btn-group",append:"btn-outline-secondary",removeLast:"btn-outline-secondary",insert:"btn-outline-secondary",remove:"btn-outline-secondary",moveUp:"btn-outline-secondary",moveDown:"btn-outline-secondary",empty:"text-center"};"small"===o.sizing?(s.table+=" table-sm",s.buttonGroup+=" btn-group-sm",s.control+=" form-control-sm"):"large"===o.sizing&&(s.buttonGroup+=" btn-group-lg",s.control+=" form-control-lg"),o.sectionClasses&&Object.assign(s,o.sectionClasses),this.applySectionClasses(s),this.uiParams=o}createButtonGroup(){if(this.uiParams.useButtonGroup){let e=document.createElement("div");return o(e,this.getSectionClasses("buttonGroup")),e}return super.createButtonGroup()}generateControl(e,t,n,s){let l=null;if("checkbox"===t.type){let r=i("div",null,null,"form-check");e.appendChild(r),l=i("input",n,s,"form-check-input position-static"),l.type="checkbox",l.value=1,o(l,t.ctrlClass),r.appendChild(l)}else"readonly"===t.type?(l=i("input",n,s,null,"text"),o(l,this.getSectionClasses("control"),t.ctrlClass),l.classList.remove("form-control"),l.classList.add("form-control-plaintext"),l.readOnly=!0,e.appendChild(l)):l=super.generateControl(e,t,n,s);return l}};const C=class extends f{constructor(e,t,n){super(t,n),this.name="ui-bootstrap5";let o={useButtonGroup:!0,sectionClasses:null,sizing:"normal"};Object.assign(o,e);let s={table:"table",thead:"table-light",control:"form-control",button:"btn",buttonGroup:"btn-group",append:"btn-outline-secondary",removeLast:"btn-outline-secondary",insert:"btn-outline-secondary",remove:"btn-outline-secondary",moveUp:"btn-outline-secondary",moveDown:"btn-outline-secondary",empty:"text-center"};"small"===o.sizing?(s.table+=" table-sm",s.buttonGroup+=" btn-group-sm",s.control+=" form-control-sm"):"large"===o.sizing&&(s.buttonGroup+=" btn-group-lg",s.control+=" form-control-lg"),o.sectionClasses&&Object.assign(s,o.sectionClasses),this.applySectionClasses(s),this.uiParams=o}createButtonGroup(){if(this.uiParams.useButtonGroup){let e=document.createElement("div");return o(e,this.getSectionClasses("buttonGroup")),e}return super.createButtonGroup()}generateControl(e,t,n,s){let l=null;return"checkbox"===t.type?(l=i("input",n,s,"form-check-input"),l.type="checkbox",l.value=1,o(l,t.ctrlClass),e.appendChild(l)):"readonly"===t.type?(l=i("input",n,s,null,"text"),o(l,this.getSectionClasses("control"),t.ctrlClass),l.classList.remove("form-control"),l.classList.add("form-control-plaintext"),l.readOnly=!0,e.appendChild(l)):l=super.generateControl(e,t,n,s),l}};const b=class extends f{constructor(e,t,n){super(t,n),this.name="ui-bulma";let o={useButtonGroup:!0,sectionClasses:null,sizing:"normal"};Object.assign(o,e);let s={table:"table",control:"input",button:"button",buttonGroup:"field has-addons",append:"is-outlined",removeLast:"is-outlined",insert:"is-outlined",remove:"is-outlined",moveUp:"is-outlined",moveDown:"is-outlined",empty:"has-text-centered"};"small"===o.sizing?(s.table+=" is-narrow",s.control+=" is-small",s.button+=" is-small"):"medium"===o.sizing?(s.control+=" is-medium",s.button+=" is-medium"):"large"===o.sizing&&(s.control+=" is-large",s.button+=" is-large"),o.sectionClasses&&Object.assign(s,o.sectionClasses),this.applySectionClasses(s),this.uiParams=o}generateButton(e,t,n){let s=i("button",n,null,null,"button");s.title=this.i18n[t],o(s,this.getSectionClasses("button"),this.getSectionClasses(t));let l=null;if(this.iconFramework.isTextBased?l=s:(l=document.createElement("span"),l.classList.add("icon"),s.appendChild(l)),this.iconFramework.generateIcon(l,t),this.uiParams.useButtonGroup){let t=document.createElement("p");t.classList.add("control"),t.appendChild(s),e.appendChild(t)}else e.appendChild(s);return s}createButtonGroup(){if(this.uiParams.useButtonGroup){let e=document.createElement("div");return o(e,this.getSectionClasses("buttonGroup")),e}return super.createButtonGroup()}generateControl(e,t,n,s){let l=null;if("select"===t.type){let r=i("div",null,null,"select");"small"===this.uiParams.sizing?r.classList.add("is-small"):"medium"===this.uiParams.sizing?r.classList.add("is-medium"):"large"===this.uiParams.sizing&&r.classList.add("is-large"),e.appendChild(r),l=super.generateControl(null,t,n,s),o(l,t.ctrlClass),r.appendChild(l)}else if("checkbox"===t.type){let r=i("label",null,null,"checkbox");e.appendChild(r),l=i("input",n,s,null,"checkbox"),l.value=1,o(l,t.ctrlClass),r.appendChild(l)}else"readonly"===t.type?(l=i("input",n,s,null,"text"),o(l,this.getSectionClasses("control"),t.ctrlClass),l.classList.add("is-static"),l.readOnly=!0,e.appendChild(l)):l=super.generateControl(e,t,n,s);return l}};const y=class extends f{constructor(e,t,n){super(t,n),this.name="ui-foundation6";let o={useButtonGroup:!0,sectionClasses:null};Object.assign(o,e);let s={button:"button",buttonGroup:"button-group"};o.sectionClasses&&Object.assign(s,o.sectionClasses),this.applySectionClasses(s),this.uiParams=o}createButtonGroup(){if(this.uiParams.useButtonGroup){let e=document.createElement("div");return o(e,this.getSectionClasses("buttonGroup")),e}return super.createButtonGroup()}};const v=class{constructor(e){const n=this;Object.assign(n,{uniqueIndex:0,rowOrder:[],isDataLoaded:!1,visibleCount:0,finalColSpan:0,hideLastColumn:!1,settings:null,tbWhole:null,tbBody:null,iconFramework:null,uiFramework:null});const l=Object.assign({},e);n.settings=l,console.debug("ag:Options initialized");let r=null;if(r="string"==typeof l.element?document.getElementById(l.element):l.element,!r||!r.tagName||"TABLE"!==r.tagName)throw"*element* is not defined or is not a table DOM element.";if(n.tbWhole=r,r.innerHTML="",console.debug("ag:Checked element"),"bootstrapicons"===l.iconFramework)n.iconFramework=new a(l.iconParams);else if("fontawesome6"===l.iconFramework)n.iconFramework=new u(l.iconParams);else if("fontawesome5"===l.iconFramework)n.iconFramework=new c(l.iconParams);else if("ionicon4"===l.iconFramework)n.iconFramework=new m(l.iconParams);else if("materialdesignicons3"===l.iconFramework)n.iconFramework=new d(l.iconParams);else if("openiconic"===l.iconFramework)n.iconFramework=new h(l.iconParams);else if("typicons2"===l.iconFramework)n.iconFramework=new p(l.iconParams);else{if(l.iconFramework&&"default"!==l.iconFramework)throw`Unknown Icon framework *${l.iconFramework}*.`;n.iconFramework=new t(l.iconParams)}if(console.debug("ag:Checked icon framework"),"bootstrap4"===l.uiFramework)n.uiFramework=new g(l.uiParams,l.i18n,n.iconFramework);else if("bootstrap5"===l.uiFramework)n.uiFramework=new C(l.uiParams,l.i18n,n.iconFramework);else if("bulma"===l.uiFramework)n.uiFramework=new b(l.uiParams,l.i18n,n.iconFramework);else if("foundation6"===l.uiFramework)n.uiFramework=new y(l.uiParams,l.i18n,n.iconFramework);else{if(l.uiFramework&&"default"!==l.uiFramework)throw`Unknown UI framework *${l.uiFramework}*.`;n.uiFramework=new w(l.uiParams,l.i18n,n.iconFramework)}console.debug("ag:Checked ui framework"),s(l.idPrefix)&&(r.id?l.idPrefix=r.id:l.idPrefix="ag"+(new Date).getTime(),console.debug(`*idPrefix* = ${l.idPrefix}`)),l.sectionClasses&&n.uiFramework.applySectionClasses(l.sectionClasses),o(r,n.uiFramework.getSectionClasses("table"));const f=n.createElement("thead");r.appendChild(f);let v,x=n.createElement("tr","theadRow");f.appendChild(x);let O=0;l.hideRowNumColumn||(v=n.createElement("th","theadCell"),x.appendChild(v),O++);let R=0;for(let e=0;e<l.columns.length;e++)if("hidden"!==l.columns[e].type){if(0===R){if(v=n.createElement("th","theadCell"),x.appendChild(v),o(v,l.columns[e].displayClass),!s(l.columns[e].displayCss))for(let t in l.columns[e].displayCss)v.style[t]=l.columns[e].displayCss[t];l.columns[e].headerSpan>1&&(v.setAttribute("colSpan",l.columns[e].headerSpan),R=l.columns[e].headerSpan-1),"function"==typeof l.columns[e].display?l.columns[e].display(v):l.columns[e].display&&(v.innerText=l.columns[e].display)}else R--;O++}v=n.createElement("th","theadCell"),l.hideButtons.insert&&l.hideButtons.remove&&l.hideButtons.moveUp&&l.hideButtons.moveDown?(n.hideLastColumn=!0,v.style.display="none"):O++,!n.hideLastColumn&&l.rowButtonsInFront?l.hideRowNumColumn?x.insertBefore(v,x.firstChild):x.insertBefore(v,x.childNodes[1]):x.appendChild(v),n.finalColSpan=O;const k=n.createElement("tbody");r.appendChild(k),n.tbBody=k;const B=n.createElement("tfoot");r.appendChild(B),x=n.createElement("tr","tfootRow"),B.appendChild(x),v=n.createElement("td","tfootCell"),v.colSpan=n.finalColSpan,x.appendChild(v);const E=l.idPrefix+"_rowOrder",I=i("input",E,E,null,"hidden");if(v.appendChild(I),l.hideButtons.append&&l.hideButtons.removeLast)x.style.display="none";else{let e=n.uiFramework.createButtonGroup();if(e?v.appendChild(e):e=v,!l.hideButtons.append){n.uiFramework.generateButton(e,"append").addEventListener("click",(function(e){n.insertRow(1)}))}if(!l.hideButtons.removeLast){n.uiFramework.generateButton(e,"removeLast").addEventListener("click",(function(e){n.removeRow()}))}}this.showEmptyMessage(),n.settings=l,console.debug("ag:Initialized")}createElement(e,t,n){return i(e,n,null,this.uiFramework.getSectionClasses(t||e))}loadData(e,t=!1){if(!Array.isArray(e)||!e.length)throw"*records* should be in array format!";const n=this,o=n.settings;n.tbBody.innerHTML="",n.rowOrder.length=0,n.uniqueIndex=0;const s=n.insertRow(e.length);for(let t=0;t<s.addedRows.length;t++){for(let s=0;s<o.columns.length;s++)n.setCtrlValue(s,n.rowOrder[t],e[t][o.columns[s].name]);"function"==typeof o.rowDataLoaded&&o.rowDataLoaded(n.tbWhole,e[t],t,n.rowOrder[t])}n.isDataLoaded=!0,t&&(n.settings.initData=null),"function"==typeof o.dataLoaded&&o.dataLoaded(n.tbWhole,e)}insertRow(e,t,n){const r=this,a=r.settings,u=r.uiFramework,c=r.tbBody;let d,m,p=[],h=null,f=!1,w=e,g=!1;if(Array.isArray(e)&&(w=e.length,g=!0),l(n)){for(let e=0;e<r.rowOrder.length;e++)if(r.rowOrder[e]===n){t=e,0!==e&&(h=e-1);break}}else l(t)?t>=r.rowOrder.length?t=null:h=t-1:0!==r.rowOrder.length&&(t=null,h=r.rowOrder.length-1);0===r.rowOrder.length&&(c.innerHTML="");for(let n=0;n<w;n++){if(0<a.maxRowsAllowed&&r.rowOrder.length>=a.maxRowsAllowed){f=!0;break}let h=++r.uniqueIndex,w=[];if(d=r.createElement("tr","tbodyRow",a.idPrefix+"_$row_"+h),d.dataset.uniqueIndex=h,l(t)){let e=t+n;r.rowOrder.splice(e,0,h),c.insertBefore(d,c.childNodes[e])}else r.rowOrder.push(h),c.appendChild(d);p.push(h),a.hideRowNumColumn||(m=r.createElement("td","tbodyCell",a.idPrefix+"_$rowNum_"+h),m.innerText=""+r.rowOrder.length,o(m,u.getSectionClasses("first")),d.appendChild(m));for(let t=0;t<a.columns.length;t++){if("hidden"===a.columns[t].type){w.push(t);continue}if(m=r.createElement("td","tbodyCell"),d.appendChild(m),o(m,a.columns[t].cellClass),!s(a.columns[t].cellCss))for(let e in a.columns[t].cellCss)m.style[e]=a.columns[t].cellCss[e];let l,i=a.idPrefix+"_"+a.columns[t].name+"_"+h;l="function"==typeof a.nameFormatter?a.nameFormatter(a.idPrefix,a.columns[t].name,h):i;let u=null;const c="custom"===a.columns[t].type;if(c)"function"==typeof a.columns[t].customBuilder&&(u=a.columns[t].customBuilder(m,a.idPrefix,a.columns[t].name,h));else{if(u=r.uiFramework.generateControl(m,a.columns[t],i,l),!s(a.columns[t].ctrlAttr))for(let e in a.columns[t].ctrlAttr)u.setAttribute(e,a.columns[t].ctrlAttr[e]);if(!s(a.columns[t].ctrlCss))for(let e in a.columns[t].ctrlCss)u.style[e]=a.columns[t].ctrlCss[e];if(a.columns[t].events){u.dataset.columnName=a.columns[t].name,u.dataset.uniqueIndex=h;for(let e in a.columns[t].events){let n=a.columns[t].events[e];u.addEventListener(e,(function(e){e.columnName=e.currentTarget.dataset.columnName,e.uniqueIndex=parseInt(e.currentTarget.dataset.uniqueIndex),n(e)}))}}}g?r.setCtrlValue(t,h,e[n][a.columns[t].name]):s(a.columns[t].value)||r.setCtrlValue(t,h,a.columns[t].value),c||"function"!=typeof a.columns[t].ctrlAdded||a.columns[t].ctrlAdded(u,m,h)}if(m=r.createElement("td","tbodyCell",a.idPrefix+"_$rowButton_"+h),r.hideLastColumn||!a.rowButtonsInFront?d.appendChild(m):a.hideRowNumColumn?d.insertBefore(m,d.firstChild):d.insertBefore(m,d.childNodes[1]),w.forEach((function(t){const o=a.columns[t].name;let l,u=a.idPrefix+"_"+o+"_"+h;l="function"==typeof a.nameFormatter?a.nameFormatter(a.idPrefix,o,h):u,m.appendChild(i("input",u,l,null,"hidden")),g?r.setCtrlValue(t,h,e[n][o]):s(a.columns[t].value)||r.setCtrlValue(t,h,a.columns[t].value)})),r.hideLastColumn)m.style.display="none";else if(a.columns.length>r.visibleCount){o(m,u.getSectionClasses("last"));let e=u.createButtonGroup();e?m.appendChild(e):e=m,["insert","remove","moveUp","moveDown"].forEach((function(t){if(!a.hideButtons[t]){const n=a.idPrefix+"_$"+t+"_"+h,o=u.generateButton(e,t,n);o.dataset.uniqueIndex=h,o.addEventListener("click",(function(e){const n=parseInt(e.currentTarget.dataset.uniqueIndex);r.rowButtonActions(t,n)}))}}))}}return r.saveSetting(),a.hideRowNumColumn||s(t)||r.sortSequence(t),l(t)?"function"==typeof a.afterRowInserted&&a.afterRowInserted(r.tbWhole,h,p):"function"==typeof a.afterRowAppended&&a.afterRowAppended(r.tbWhole,h,p),f&&"function"==typeof a.maxNumRowsReached&&a.maxNumRowsReached(r.tbWhole),{addedRows:p,parentIndex:h,rowIndex:t}}removeRow(e,t,n){const o=this;let s=o.settings,r=o.tbBody;if(l(t))for(let n=0;n<o.rowOrder.length;n++)if(o.rowOrder[n]===t){e=n;break}l(e)?(n||"function"!=typeof s.beforeRowRemove||s.beforeRowRemove(o.tbWhole,e))&&(o.rowOrder.splice(e,1),r.removeChild(r.childNodes[e]),o.saveSetting(),s.hideRowNumColumn||o.sortSequence(e),"function"==typeof s.afterRowRemoved&&s.afterRowRemoved(o.tbWhole,e)):(n||"function"!=typeof s.beforeRowRemove||s.beforeRowRemove(o.tbWhole,o.rowOrder.length-1))&&(t=o.rowOrder.pop(),r.removeChild(r.lastChild),o.saveSetting(),"function"==typeof s.afterRowRemoved&&s.afterRowRemoved(o.tbWhole,null)),0===o.rowOrder.length&&o.showEmptyMessage()}moveUpRow(e,t){const n=this;let o=n.settings,r=n.tbBody,i=null;if(l(e)&&e>0&&e<n.rowOrder.length?(i=e,t=n.rowOrder[e]):l(t)&&(i=n.findRowIndex(t)),!s(i)&&i>0){let e=n.rowOrder[i-1],s=document.getElementById(o.idPrefix+"_$row_"+t),l=document.getElementById(o.idPrefix+"_$row_"+e);if(r.removeChild(s),r.insertBefore(s,l),n.rowOrder[i]=e,n.rowOrder[i-1]=t,!o.hideRowNumColumn){let n=document.getElementById(o.idPrefix+"_$rowNum_"+t),s=document.getElementById(o.idPrefix+"_$rowNum_"+e),l=s.innerHTML;s.innerHTML=n.innerHTML,n.innerHTML=l}n.saveSetting(),document.getElementById(o.idPrefix+"_$moveUp_"+t).blur(),document.getElementById(o.idPrefix+"_$moveUp_"+e).focus(),"function"==typeof o.afterRowSwapped&&o.afterRowSwapped(n.tbWhole,i,i-1)}}moveDownRow(e,t){const n=this;let o=n.settings,r=n.tbBody,i=null;if(l(e)&&e>=0&&e<n.rowOrder.length-1?(i=e,t=n.rowOrder[e]):l(t)&&(i=n.findRowIndex(t)),!s(i)&&i!==n.rowOrder.length-1){let e=n.rowOrder[i+1],s=document.getElementById(o.idPrefix+"_$row_"+t),l=document.getElementById(o.idPrefix+"_$row_"+e);if(r.removeChild(l),r.insertBefore(l,s),n.rowOrder[i]=e,n.rowOrder[i+1]=t,!o.hideRowNumColumn){let n=document.getElementById(o.idPrefix+"_$rowNum_"+t),s=document.getElementById(o.idPrefix+"_$rowNum_"+e),l=s.innerHTML;s.innerHTML=n.innerHTML,n.innerHTML=l}n.saveSetting(),document.getElementById(o.idPrefix+"_$moveDown_"+t).blur(),document.getElementById(o.idPrefix+"_$moveDown_"+e).focus(),"function"==typeof o.afterRowSwapped&&o.afterRowSwapped(n.tbWhole,i,i+1)}}setCtrlValue(e,t,n){const o=this;let r=o.settings,i=r.columns[e].type,a=r.columns[e].name;if("custom"===i)"function"==typeof r.columns[e].customSetter&&r.columns[e].customSetter(r.idPrefix,a,t,n);else{let e=o.getCellCtrl(r.idPrefix,a,t);"checkbox"===i?"boolean"==typeof n?e.checked=n:l(n)?e.checked=0!==n:e.checked=!s(n):e.value=s(n)?"":n}}getCellCtrl(e,t,n){return document.getElementById(e+"_"+t+"_"+n)}getCtrlValue(e,t){const n=this,o=n.settings,s=o.columns[e];if("custom"===s.type){if("function"==typeof s.customGetter)return s.customGetter(o.idPrefix,s.name,t);throw`*customGetter* of column *${s.name}* is not defined.`}{let e=n.getCellCtrl(o.idPrefix,s.name,t);return null===e?null:"checkbox"===s.type?e.checked?1:0:e.value}}getRowValue(e,t){const n=this;let o={},l=s(t)?"":"_"+t;return n.settings.columns.forEach((function(t,s){let r=t.name+l;o[r]=n.getCtrlValue(s,e)})),o}getColumnIndex(e){const t=this.settings.columns;for(let n=0;n<t.length;n++)if(t[n].name===e)return n;return null}isRowEmpty(e){const t=this,n=t.settings.columns;for(let o=0;o<n.length;o++){const l=n[o].emptyCriteria;let r=t.getCtrlValue(o,e);if("function"==typeof l){if(!l(r))return!1}else{let i=null;if(s(l)){const s=n[o].type;if("checkbox"===s)i=0;else if("select"===s){const s=t.getCellCtrl(t.settings.idPrefix,n[o].name,e).options;i=s.length>0?s[0].value:""}else i=""}else i=l;if(r!==i)return!1}}return!0}findRowIndex(e){for(let t=0;t<this.rowOrder.length;t++)if(this.rowOrder[t]===e)return t;return null}saveSetting(){document.getElementById(this.settings.idPrefix+"_rowOrder").value=this.rowOrder.join()}showEmptyMessage(){const e=this;e.tbBody.innerHTML="";const t=e.createElement("tr","tbodyRow");e.tbBody.appendChild(t);const n=e.createElement("td","tbodyCell");n.setAttribute("colspan",e.finalColSpan),o(n,e.uiFramework.getSectionClasses("empty")),n.innerText=e.settings.i18n.rowEmpty,t.appendChild(n)}sortSequence(e){const t=this;for(let n=e||0;n<t.rowOrder.length;n++)document.getElementById(t.settings.idPrefix+"_$rowNum_"+t.rowOrder[n]).innerText=""+(n+1)}rowButtonActions(e,t){const n=this;"insert"===e?n.insertRow(1,null,t):"remove"===e?n.removeRow(null,t):"moveUp"===e?n.moveUpRow(null,t):"moveDown"===e&&n.moveDownRow(null,t)}},x=new WeakMap,O={element:null,uiFramework:null,uiParams:null,iconFramework:null,iconParams:null,initRows:3,idPrefix:null,initData:null,columns:[],i18n:null,hideButtons:null,hideRowNumColumn:!1,rowButtonsInFront:!1,rowCountName:"_RowCount",sectionClasses:null,maxRowsAllowed:0},R={nameFormatter:null,dataLoaded:null,rowDataLoaded:null,afterRowAppended:null,afterRowInserted:null,afterRowSwapped:null,beforeRowRemove:null,afterRowRemoved:null,maxNumRowsReached:null},k={type:"text",name:null,value:null,display:null,displayCss:null,displayClass:null,displayTooltip:null,headerSpan:1,cellCss:null,cellClass:null,ctrlAttr:null,ctrlProp:null,ctrlCss:null,ctrlClass:null,ctrlOptions:null,invisible:!1,emptyCriteria:null,customBuilder:null,customGetter:null,customSetter:null,events:null,ctrlAdded:null};const B=class{constructor(e){let t=Object.assign({},O,R,e),n={append:"Append Row",removeLast:"Remove Last Row",insert:"Insert Row Above",remove:"Remove Current Row",moveUp:"Move Up",moveDown:"Move Down",rowEmpty:"This Grid Is Empty"};t.i18n&&Object.assign(n,t.i18n),t.i18n=n;let o={append:!1,removeLast:!1,insert:!1,remove:!1,moveUp:!1,moveDown:!1};t.hideButtons&&Object.assign(o,t.hideButtons),t.hideButtons=o;for(let e=0;e<t.columns.length;e++){let n=Object.assign({},k,t.columns[e]);t.columns[e]=n}const s=new v(t);x.set(this,s),Array.isArray(t.initData)?s.loadData(t.initData,!0):t.initRows>0&&s.insertRow(t.initRows)}appendRow(e){return x.get(this).insertRow(e||1).addedRows}insertRow(e,t){return x.get(this).insertRow(e,t).addedRows}removeRow(e){x.get(this).removeRow(e)}moveUpRow(e){x.get(this).moveUpRow(e)}moveDownRow(e){x.get(this).moveDownRow(e)}load(e){x.get(this).loadData(e)}getAllValue(e){let t=x.get(this),n=e?{}:[];return t.rowOrder.forEach((function(o,s){e?Object.assign(n,t.getRowValue(o,s)):n.push(t.getRowValue(o))})),e&&(n[t.settings.rowCountName]=t.rowOrder.length),n}getUniqueIndex(e){const t=x.get(this).rowOrder;return e>=0&&e<t.length?t[e]:null}getRowIndex(e){const t=x.get(this).rowOrder;for(let n=0;n<t.length;n++)if(t[n]===e)return n;return null}getRowCount(){return x.get(this).rowOrder.length}getRowOrder(){return x.get(this).rowOrder.slice()}getRowValue(e){let t=this.getUniqueIndex(e);return null!==t?x.get(this).getRowValue(t):null}getCtrlValue(e,t){const n=x.get(this).getColumnIndex(e),o=this.getUniqueIndex(t);return null!==n&&null!==o?x.get(this).getCtrlValue(n,o):null}setCtrlValue(e,t,n){const o=x.get(this).getColumnIndex(e),s=this.getUniqueIndex(t);if(null!==o&&null!==s)return x.get(this).setCtrlValue(o,s,n)}getColumns(){return x.get(this).settings.columns.slice()}getCellCtrl(e,t){const n=this.getUniqueIndex(t);return this.getCellCtrlByUniqueIndex(e,n)}getCellCtrlByUniqueIndex(e,t){const n=x.get(this);return null!==n.getColumnIndex(e)&&l(t)?n.getCellCtrl(n.settings.idPrefix,e,t):null}isRowEmpty(e){const t=this.getUniqueIndex(e);return null===t||x.get(this).isRowEmpty(t)}removeEmptyRows(){const e=x.get(this),t=this.getRowOrder();for(let n=0;n<t.length;n++)e.isRowEmpty(t[n])&&e.removeRow(null,t[n],!0)}};var E=n(5311);E.each(E(".rs-table-input"),(function(e,t){new B(E(t).data("settings"))}))})()})();